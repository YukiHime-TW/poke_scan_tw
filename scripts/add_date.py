import json
import os

FILE_PATH = '../assets/data.json'

# 台灣繁體中文版 發售日期對照表 (YYYY-MM-DD)
# 資料來源：台灣寶可夢官網/Wiki
SET_DATES = {
    # --- 太陽&月亮 (Sun & Moon) ---
    # 眾星雲集組合篇
    "AC1a": "2019-10-09", "AC1b": "2019-10-09",
    "AC1D": "2019-10-09",
    # 美夢成真組合篇
    "AC2a": "2019-12-20", "AC2b": "2019-12-20",
    "AC2D": "2019-12-20",
    # 雙倍爆擊
    "AS5a": "2020-02-21", "AS5b": "2020-02-21",
    "AS5D": "2020-02-21",
    # 傳說交鋒
    "AS6a": "2020-04-10", "AS6b": "2020-04-10",
    "AS6D": "2020-04-10",

    # --- 劍&盾 (Sword & Shield) ---
    # 劍&盾
    "SC1a": "2020-06-19", "SC1b": "2020-06-19",
    "SC1D": "2020-06-19",
    # 無極力量
    "SC2a": "2020-08-21", "SC2b": "2020-08-21",
    "SC2D": "2020-08-21",
    # 驚天伏特攻擊
    "S4": "2020-10-09",
    # 閃色明星V
    "S4a": "2020-11-27",
    "SCA": "2021-11-27",
    # 連擊大師、一擊大師
    "S5I": "2021-01-29",  "S5R": "2021-01-29",
    "SCB": "2021-01-29",
    # 雙璧戰士
    "S5a": "2021-04-02",
    # 銀白戰槍、漆黑幽魂
    "S6H": "2021-05-07",  "S6K": "2021-05-07",
    # 伊布英雄
    "S6a": "2021-06-11",
    "SCC": "2021-11-27",
    # 摩天巔峰、蒼空烈流
    "S7D": "2021-07-23",  "S7R": "2021-07-23",
    # 匯流藝術
    "S8": "2021-10-01",
    "SCD": "2021-10-01",
    # 25 週年收藏版
    "S8a": "2021-10-20", 
    # VMAX絕群壓軸
    "S8b": "2021-12-17",
    # 星星誕生
    "S9": "2022-01-28", 
    "SK": "2022-01-28",
    # 對戰地區
    "S9a": "2022-03-11",
    "SLL": "2022-03-11",  "SLD": "2022-03-11",
    # 時間觀察者、空間魔術師
    "S10D": "2022-04-22", "S10P": "2022-04-22",
    # 黑暗亡靈
    "S10a": "2022-05-27",
    # Pokémon GO
    "S10b": "2022-06-17",
    # 迷途深淵
    "S11": "2022-07-29",  
    "SPZ": "2022-08-26",  "SPD": "2022-08-26",
    # 白熱奧祕
    "S11a": "2022-09-16",
    # 思維激盪
    "S12": "2022-11-04",
    "SDL": "2022-11-04", "SDP": "2022-11-04", "SDM": "2022-11-04",
    # 天地萬物VSTAR
    "S12a": "2022-12-16",

    # --- 朱&紫 (Scarlet & Violet) ---
    # 朱ex、紫ex
    "SV1S": "2023-02-03", "SV1V": "2023-02-03",
    # 三連音爆
    "SV1a": "2023-03-24",
    # 冰雪險境、碟旋暴擊
    "SV2P": "2023-04-28", "SV2D": "2023-04-28",
    # 寶可夢卡牌151
    "SV2a": "2023-06-30",
    # 黯焰支配者
    "SV3": "2023-08-11", 
    # 激狂駭浪
    "SV3a": "2023-09-29",
    # 古代咆哮、未來閃光
    "SV4K": "2023-11-10", "SV4M": "2023-11-10",
    # 閃色寶藏ex
    "SV4a": "2023-12-22",
    # 狂野之力、異度審判
    "SV5K": "2024-02-02", "SV5M": "2024-02-02",
    # 緋紅薄霧
    "SV5a": "2024-04-03",
    # 變幻假面
    "SV6": "2024-05-10",
    # 黑夜漫遊者
    "SV6a": "2024-06-21",
    # 星晶奇跡
    "SV7": "2024-08-02",
    # 樂園騰龍
    "SV7a": "2024-09-27",
    # 超電突圍
    "SV8": "2024-10-25",
    # 太晶慶典ex
    "SV8a": "2024-12-20",
    # 對戰搭檔
    "SV9": "2025-02-07",
    # 熱風競技場
    "SV9a": "2025-03-28",
    # 火箭隊的榮耀
    "SV10": "2025-05-02",
    # 純白閃焰、漆黑伏特
    "SV11W": "2025-06-20", "SV11B": "2025-06-20",

    # --- 超級進化 (Mega) ---
    # 超級勇氣、超級交響樂
    "M1L": "2025-08-15", "M1S": "2025-08-15",
    # 烈獄狂火X
    "M2": "2025-10-09",
    # 超級進化夢想
    "M2a": "2025-12-05",

    # 特典卡
    "SM-P": "2019-10-9",
    "S-P": "2022-12-15", 
    "SV-P": "2023-01-26",
    "M-P": "2025-08-07" 
}

def update_json_dates():
    if not os.path.exists(FILE_PATH):
        print("❌ 找不到 data.json")
        return

    with open(FILE_PATH, 'r', encoding='utf-8') as f:
        data = json.load(f)

    updated_count = 0
    
    for set_code, set_data in data.items():
        # 如果字典裡有這個代號，就更新日期
        if set_code in SET_DATES:
            set_data['releaseDate'] = SET_DATES[set_code]
            updated_count += 1
        else:
            # 如果字典裡沒有，預設給一個舊日期，讓它排在後面
            if 'releaseDate' not in set_data:
                print(f"⚠️ 未知日期的系列: {set_code} (將設為 2000-01-01)")
                set_data['releaseDate'] = "2000-01-01"

    with open(FILE_PATH, 'w', encoding='utf-8') as f:
        json.dump(data, f, ensure_ascii=False, indent=2)

    print(f"✅ 更新完成！共更新了 {updated_count} 個系列的日期。")

if __name__ == "__main__":
    update_json_dates()